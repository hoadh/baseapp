#!/usr/bin/env node
/*
 * Old code (generated by express command (in command-line)
var debug = require('debug')('baseapp');
var app = require('../app');

app.set('port', process.env.PORT || 3000);

var server = app.listen(app.get('port'), function() {
  debug('Express server listening on port ' + server.address().port);
});

*/


var debug = require('debug')('baseapp');
var app = require('../app');

app.set('port', process.env.PORT || 3000);

var server = app.listen(app.get('port'), function() {
  debug('Express server listening on port ' + server.address().port);
});

// Setup socket server
// Reference: http://stackoverflow.com/questions/17696801/express-js-app-listen-vs-server-listen
var socketio  = require('socket.io');
var io        = require('socket.io').listen(server);
var client_count = 0;
// on connection
io.sockets.on('connection', function (socket) {
	client_count++;
	console.log("hello!" + client_count);
});